# fl-ppo-ids-kdd  
سیستم تشخیص نفوذ ایمن با استفاده از یادگیری فدرال و یادگیری تقویتی

# یادگیری فدرال برای سیستم تشخیص نفوذ با استفاده از PPO و تجمیع میانگین هندسی

## راهنمای شروع پروژه

### ۱. آماده‌سازی محیط

#### پیش‌نیازها
- پایتون نسخه ۳.۸ یا بالاتر
- pip (مدیر بسته پایتون)

#### پیشنهاد شده: ایجاد محیط مجازی
```bash
# ایجاد محیط مجازی
python -m venv venv

# فعال‌سازی محیط مجازی
# در ویندوز:
.\venv\Scripts\activate
# در Unix یا MacOS:
source venv/bin/activate
```

### ۲. نصب بسته‌های موردنیاز  
برای نصب تمام وابستگی‌های لازم، دستور زیر را اجرا کنید:

```bash
# در ویندوز یا MacOS:
pip install torch numpy pandas scikit-learn
# در Unix:
pip install numpy pandas scikit-learn
pip3 install torch --index-url https://download.pytorch.org/whl/cpu
```

### ۳. ساختار پروژه
```
fl-ppo-ids-kdd/
├── main.py         # اسکریپت پایتون
└── KDDTrain+.txt   # فایل دیتاست
```

### ۴. پارامترهای پیکربندی

#### پارامترهای یادگیری فدرال
- `num_clients`: تعداد کلاینت‌ها در فدراسیون (پیش‌فرض: ۵)
- `federated_rounds`: تعداد دورهای آموزش فدرال (پیش‌فرض: ۱۰)
- `local_iterations`: تعداد تکرارهای آموزش محلی در هر دور (پیش‌فرض: ۵)
- `global_lr`: نرخ یادگیری جهانی (پیش‌فرض: 3e-4)
- `Aggregation_algorithm`: الگوریتم تجمیع. گزینه‌ها: "geometric median" (پیش‌فرض)، "fed_avg"، "multi_krum"، "bulyan"، "coordinate_median"، "adaptive_trimmed_mean"، "best client"

#### پارامترهای PPO
- `clip_epsilon`: پارامتر برش PPO (پیش‌فرض: ۰.۲)
- `ppo_epochs`: تعداد اپوک‌های PPO (پیش‌فرض: ۴)
- `batch_size`: اندازه دسته آموزشی (پیش‌فرض: ۶۴)
- `rollout_length`: طول بافر rollout (پیش‌فرض: ۵۱۲)

#### پارامترهای امنیتی
- `poisoned_clients_data`: فهرست کلاینت‌هایی با داده‌های مسموم
- `poisoned_clients_model`: فهرست کلاینت‌هایی با مدل‌های مسموم
- `poisoned_clients_byzantine`: فهرست کلاینت‌های بیزانسی
- `weighted_with_history`: استفاده از دقت تاریخی برای وزن‌دهی (پیش‌فرض: True)

#### پیکربندی حمله

##### حالت حمله صفر (Zero Attack)
- `zero_attack`: فعال/غیرفعال کردن حالت حمله صفر
  - `True`: اطلاعات نوع حمله در طول آموزش حذف می‌شود
  - `False`: اطلاعات نوع حمله در طول آموزش در دسترس است

##### نوع حمله
- `attack_type`: نوع حمله مورد تمرکز (مثلاً: "neptune"، "ipsweep"، "back")

### ۵. اجرای کد

#### روش اول: اجرای مستقیم اسکریپت پایتون
```bash
python main.py
```

### ۶. خروجی‌های مورد انتظار
- روند آموزش در ترمینال نمایش داده خواهد شد
- دقت مدل‌ها در فایل‌های CSV ذخیره می‌شود
- معیارهای عملکرد برای هر دور فدرال ثبت می‌شوند

### ۷. نکات
- کد شامل یک چارچوب یادگیری فدرال با الگوریتم PPO برای تشخیص نفوذ است
- برای مقابله با حملات مسموم‌سازی، از تجمیع میانگین هندسی استفاده شده است
- وزن‌های مدل و تاریخچه آموزش در طی فرآیند یادگیری فدرال پیگیری می‌شوند

### ۸. رفع اشکال
- اطمینان حاصل کنید که تمام بسته‌های موردنیاز نصب شده و نسخه‌های آن‌ها سازگار باشند
- بررسی کنید که فایل دیتاست `KDDTrain+.txt` در مسیر درست قرار داشته باشد
